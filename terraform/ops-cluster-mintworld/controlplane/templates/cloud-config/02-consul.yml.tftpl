#cloud-config
merge_how:
  - name: list
    settings: [append]
  - name: dict
    settings: [no_replace, recurse_list]

write_files:
  - encoding: b64
    path: /etc/consul.d/consul.hcl
    content: ${tf__content_consul_hcl}
    owner: consul:consul
    permissions: "0644"
  - encoding: b64
    path: /etc/systemd/system/consul.service
    content: ${tf__content_consul_service}
    owner: root:root
    permissions: "0644"
